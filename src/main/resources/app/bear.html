<!DOCTYPE html>

<html>
<head>
    <title></title>

    <meta charset="UTF-8">

    <script src="js/jquery-2.0.3.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/ui-bootstrap-tpls-0.6.0.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/chosen.jquery.js"></script>
    <!--<script src="js/ace/ace.js"></script>-->
    <script src="js/bear.js"></script>
    <script type="text/javascript" src="js/java-bindings.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/chosen.css"/>
    <link rel="stylesheet" href="css/chosen-bootstrap.css"/>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <style>
        .aceEditor {
            position: relative;
            height: 300px;
        }

        #settingsText, #scriptText{
            position: relative;
            /*height: 300px;*/
        }

        #conTabsRootPanel {
            /*position: relative;*/
            height: 200px;
        }


    </style>
    <script type="text/javascript">
        Java.initApp = function(){
            if(this.initialized){
                return;
            }

            Java.log("started Java.initApp...");
            this.initialized = true;

//            console.log('tabs:', $('#conTabList').find('a'));
            $('.nav.nav-tabs').find('li>a').click(function (e) {
                e.preventDefault();
                var $this = $(this);
                $this.tab('show');
                var href = $this.attr('href');
                var tabId = href.substring(1);
                angular.element(href).scope().selectTab(tabId);
            });

            var settingsTextEditor = ace.edit("settingsText");

            settingsTextEditor.getSession().setMode("ace/mode/java");
            settingsTextEditor.getSession().setUseWorker(false);

//            Java.log(checkExc(window.bearFX.call('conf', 'getSettingsText')) + checkExc(window.bearFX.call('conf', 'getSettingsText')));
//            Java.log("window.bearFX: " + window.bearFX);

            var scriptsEditor = ace.edit("scriptText");

            scriptsEditor.getSession().setMode("ace/mode/java");
            scriptsEditor.getSession().setUseWorker(false);

            settingsTextEditor.renderer.setShowGutter(false);
            scriptsEditor.renderer.setShowGutter(false);

            if(Java.isFX){
                settingsTextEditor.setValue(checkExc(window.bearFX.call('conf', 'getSettingsText')));
                scriptsEditor.setValue(checkExc(window.bearFX.call('conf', 'getScriptText')));
            }

            var $scope = angular.element('#FileTabsCtrl').scope();

            if (Java.isFX) {
                $scope.scripts = {
                    files: checkExc(window.bearFX.call('conf', 'getScriptNames')),
                    selectedFile: null
                };

                $scope.settings = {
                    files: checkExc(window.bearFX.call('conf', 'getSettingsNames')),
                    selectedFile: null
                };
            }else{
                $scope.scripts = {
                    files: ["DeployScript.java", "SetupScript.java"],
                    selectedFile: null
                };

                $scope.settings = {
                    files: ["Settings.java", "XX.java"],
                    selectedFile: null
                };
            }
        };

        $(document).ready(function(){
            if(!Java.isFX){
                Java.initApp();
            }
        });
    </script>
</head>
<body class="design" ng-app="bear">
<div class="btn-toolbar">
    <div class="btn-group"><a href="#" class="btn btn-default">Button 1</a><a href="#" class="btn btn-default">Button
        2</a><a href="#" class="btn btn-default">Button 3</a></div>
    <div class="btn-group"><a href="#" class="btn btn-default">Button 1</a><a href="#" class="btn btn-default">Button
        2</a><a href="#" class="btn btn-default">Button 3</a></div>
</div>
<div class="row">
    <div class="col-md-2">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Status</h3>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    <li class="list-group-item">
                        <span class="badge">14</span>Servers
                    </li>
                    <li class="list-group-item">
                        <span class="badge">2</span>Running
                    </li>
                    <li class="list-group-item">
                        <span class="badge">1</span> Failed
                    </li>
                    <li class="list-group-item">
                        <span class="badge">11</span> Completed
                    </li>
                </ul>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Environment</h3>
            </div>
            <div class="panel-body"><br>
                <div class="input-group input-group-sm">
                    <span class="input-group-addon">Stage</span>
                    <div class="input-group">
                        <div class="input-group-btn">
                            <div class="dropdown" ng-controller="DropdownCtrl">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="choice in items">
                                        <a>{{choice}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div><!-- /btn-group -->
                    </div>
                </div>
                <div class="input-group input-group-sm">
                    <span class="input-group-addon">Roles</span>
                    <div class="input-group">
                        <div class="input-group-btn">
                            <div class="dropdown" ng-controller="DropdownCtrl">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="choice in items">
                                        <a>{{choice}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div><!-- /btn-group -->
                    </div>
                </div>
                <div class="input-group input-group-sm">
                    <span class="input-group-addon">Hosts</span>
                    <div class="input-group">
                        <div class="input-group-btn">
                            <div class="dropdown" ng-controller="DropdownCtrl">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
                                <ul class="dropdown-menu">
                                    <li ng-repeat="choice in items">
                                        <a>{{choice}}</a>
                                    </li>
                                </ul>
                            </div>
                        </div><!-- /btn-group -->
                    </div>
                </div>


            </div>
        </div>
    </div>
    <div class="col-md-7">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Live Hosts Status</h3>
            </div>
            <div class="panel-body">
                <table class="table">
                    <th>
                        <td>Host</td>
                        <td>Task</td>
                        <td>Command</td>
                        <td>Status</td>
                    </th>
                    <tr>
                        <td>vm01</td>
                        <td>deploy</td>
                        <td>Grails build</td>
                        <td><pre>grails war ROOT.war</pre></td>
                        <td><div class="alert alert-info">Pending</div></td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Hosts Log</h3>
            </div>
            <div class="panel-body">
                <pre>
10:05:34 vm01 Received answer: ... dkfjdkfj
10:05:34 vm03 Received answer: ... fdfd
                </pre>
            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Shell</h3>
            </div>
            <div class="panel-body">


                <div id="conTabsRootPanel" ng-controller="TabsDemoCtrl">
                    <!--<button class="btn btn-small" ng-click="tabs[0].active = true">Select second tab</button>                   -->
                    <ul id="conTabList" class="nav nav-tabs">
                        <li></li>
                        <li class="active"><a href="#settingsTab">Settings</a></li>
                        <li ng-repeat="tab in tabs">
                            <a href="#{{tab.id}}">{{tab.title}}</a>
                        </li>
                    </ul>

                    <div class="tab-content">

                        <div ng-repeat="tab in tabs" id="{{tab.id}}" class="fade in tab-pane">
                            {{tab.content}}
                        </div>
                    </div>
                </div>

                <script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
                <script>

                </script>
            </div>
            <div class="input-group input-group-sm">
                <input type="text" class="form-control">

                <div class="input-group-btn">
                    <div class="dropdown" ng-init="init(['a', 'b'])" ng-controller="DropdownCtrl">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Action
                            <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li ng-repeat="choice in items">
                                <a>{{choice}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /btn-group -->
            </div>
            <!-- /input-group -->
        </div>
    </div>
    <div class="col-md-3" >

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Edit script</h3>
            </div>

            <div class="panel-body" id="FileTabsCtrl" ng-controller="FileTabsCtrl">
                <ul id="" class="nav nav-tabs">
                    <li class="active"><a href="#scriptTab">Script</a></li>
                    <li class=""><a href="#settingsTab">Settings</a></li>
                    <li>
                        <div class="pull-right" >
                            <div style="display: inline-block">
                                <select id="fileSelect" chosen="selectedFile"  class="chzn-select"
                                        ng-model="selectedFile" ng-options="file for file in files()">

                                </select>
                            </div>
                            <div class="btn-toolbar" style="display: inline-block">
                                <div class="btn-group">
                                    <button class="btn btn-default btn-xs"><i class="icon-trash"></i></button>
                                    <button class="btn btn-default btn-xs"><i class="icon-refresh"></i></button>
                                    <button class="btn btn-default btn-xs"><i class="icon-save"></i></button>
                                    <button class="btn btn-default btn-xs"><i class="icon-play"></i></button>
                                </div>
                                <div class="btn-group">
                                    <button class="btn btn-default btn-xs"><i class="icon-cog"></i></button>
                                </div>
                            </div>
                        </div>
                    </li>

                </ul>

                <div class="tab-content">
                    <div id="scriptTab" class="fade in tab-pane active" mytab>
                        <div id="scriptText" class="aceEditor">
                            function foo(items) {
                            var x = "All this is syntax highlighted";
                            return x;
                            }
                        </div>
                    </div>
                    <div id="settingsTab" class="fade in tab-pane" mytab>
                        <div id="settingsText" class="aceEditor">
                        function foo(items) {
                            var x = "All this is syntax highlighted";
                            return x;
                        }
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">History</h3>
            </div>
            <div class="panel-body"><br>
                <ul class="list-group">
                    <li class="list-group-item">
                        <span class="badge">1m</span>mkdir -p ~/prj/bear
                    </li>
                    <li class="list-group-item">
                        <span class="badge">4m</span>cd ~/prj/bear
                    </li>
                    <li class="list-group-item">
                        <span class="badge">1h</span>
                        Morbi leo risus
                    </li>
                </ul>
            </div>
        </div>
</div>
</body>
</html>